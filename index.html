<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestureåº”ç”¨-åˆå¤œç ”ç©¶é™¢</title>
  <link rel="icon" href="images/icon.ico" sizes="16x16">

  <!-- æ ·å¼ -->
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/search-form.css">
  <link rel="stylesheet" href="css/dropdown.css" />
  <link rel="stylesheet" href="./live2d/assets/waifu.css" />
  <!-- ä¸å†éœ€è¦ loading.cssï¼Œå¦‚æœé‡Œé¢æœ‰ .module {opacity:0} å°±åˆ«å¼•å…¥äº† -->
  <!-- <link rel="stylesheet" href="css/loading.css"> -->

  <!-- jQuery -->
  <script src="live2d/assets/jquery.min.js"></script>
  <script src="live2d/assets/jquery-ui.min.js"></script>

  <!-- ç¦æ­¢è½¬ç  -->
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
</head>

<body>
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header class="navbar">
  <!-- å·¦ä¾§ï¼šlogo + å¯¼èˆª -->
  <div class="navbar-main">
    <div class="logo">
      <a href="https://wuyeyanjiuyuan.github.io/">
        <img src="images/logo.png" alt="åˆå¤œç ”ç©¶é™¢ Logo">
      </a>
    </div>

    <nav class="nav-links">
        
        <div class="dropdown">
          <a class="dropdown-trigger" href="https://wuyeyanjiuyuan.github.io/pix2text" target="_blank">Gesture</a>
          
          <div class="dropdown-menu">
            <a href="?app=sun" id="menu-sun">sun</a>
            <a href="?app=tree" id="menu-tree">tree</a>
            <a href="?app=drones" id="menu-drones">drones</a>
            <a href="?app=dogfight" id="menu-dogfight">dogfight</a>
            <a href="?app=mario" id="menu-mario">mario</a>
          </div>
        </div>

        <a href="https://wuyeyanjiuyuan.github.io/collect" target="_blank">Collect</a>
        <a href="https://www.cnki.net/" target="_blank">CNKI</a>
      </nav>
  

  <!-- å³ä¾§ï¼šæœç´¢æ¨¡å— -->
  <div id="module-search"></div>
  </div>
</header>

<!-- ä¸»é¢˜å†…å®¹ -->
 <main id="main-container">
    <section class="tool-card">
      <div style="margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #eee;">
        <h1 id="app-title" style="font-size: 24px; color: #333;">æ­£åœ¨åŠ è½½åº”ç”¨...</h1>
        <p id="app-desc" style="color: #666; font-size: 14px; margin-top: 5px;">
          åˆå¤œç ”ç©¶é™¢
        </p>
      </div>

      <div id="module-container" style="min-height: 500px;"></div>
    </section>
  </main>


  <!-- Live2D æ¨¡å—ï¼ˆå†…å®¹é‡Œæœ‰ waifuï¼Œä¾æ—§å›ºå®šåœ¨å³ä¸‹è§’ï¼‰ -->
  <div id="module-live2d"></div>

  <!-- å…¶å®ƒ JS ç‰¹æ•ˆï¼ˆç‚¹å‡»é£˜å­—ç­‰ï¼‰ï¼ŒåªåŒ…å« <script> çš„æ¨¡å— -->
  <div id="module-effects"></div>

  <!-- é¡µè„š -->
  <footer class="footer">
    <p>Copyright &copy; 2025 åˆå¤œç ”ç©¶é™¢ | ä¿ç•™æ‰€æœ‰æƒåˆ©</p>
  </footer>

  <!-- æ¨¡å—åŠ è½½é€»è¾‘ï¼ˆæ— åŠ¨ç”»ï¼‰ -->
  <script>
    $(function(){
      // 1. åŠ è½½å…¬å…±æ¨¡å—
      $("#module-search").load("./modules/search.html");
      $("#module-live2d").load("./modules/live2d.html");
      $("#module-effects").load("./modules/effects.html");

      // 2. â˜…â˜…â˜… æ ¸å¿ƒè·¯ç”±é€»è¾‘ â˜…â˜…â˜…
      // è·å– URL ä¸­çš„ ?app=xxx å‚æ•°
      const urlParams = new URLSearchParams(window.location.search);
      const appName = urlParams.get('app') || 'sun'; // é»˜è®¤åŠ è½½ sun

      // åº”ç”¨é…ç½®è¡¨ (ä»¥ååŠ æ–°åŠŸèƒ½å°±åœ¨è¿™é‡ŒåŠ ä¸€è¡Œ)
      const appConfig = {
        'sun': {
          title: "æ—¥å‡ºæ—¥è½æ¨¡æ‹Ÿå™¨",
          desc: "MediaPipe æ‰‹åŠ¿è¯†åˆ« Â· Three.js ç‰©ç†æ¸²æŸ“ Â· çœŸå®å¤§æ°”æ•£å°„",
          file: "./modules/sun-control.html"
        },
        'tree': {
          title: "åœ£è¯æ ‘",
          desc: "åœ£è¯èŠ‚çš„å°ç¤¼ç‰©",
          file: "./modules/Christmas-tree.html" // ä½ å¯ä»¥å»ºä¸€ä¸ªç©ºçš„ html æ–‡ä»¶æµ‹è¯•
        },
        'drones': {
          title: "æ— äººæœº",
          desc: "ç”¨æ‰‹åŠ¿ç©æ— äººæœº",
          file: "./modules/drones.html"
        },
        'dogfight': {
          title: "ç©ºæˆ˜",
          desc: "ç”¨æ‰‹åŠ¿ç©å°æ¸¸æˆ",
          file: "./modules/dogfight.html"
        },
        'mario': {
          title: "é©¬é‡Œå¥¥",
          desc: "ç”¨æ‰‹åŠ¿ç©é©¬é‡Œå¥¥",
          file: "./modules/mario.html"
        }
      };

      const currentApp = appConfig[appName];

      if (currentApp) {
        // æ›´æ–°æ ‡é¢˜å’Œæè¿°
        $("#app-title").text(currentApp.title);
        $("#app-desc").text(currentApp.desc);
        
        // åŠ è½½æ¨¡å—
        $("#module-container").load(currentApp.file, function(response, status, xhr){
          if (status === "error") {
            $("#module-container").html(`
              <div style="text-align:center; padding:50px; color:#999;">
                <h3>ğŸš§ 404 Not Found</h3>
                <p>æ‰¾ä¸åˆ°æ¨¡å—æ–‡ä»¶: ${currentApp.file}</p>
                <p>è¯·ç¡®ä¿æ–‡ä»¶å·²ä¸Šä¼ åˆ° modules æ–‡ä»¶å¤¹</p>
              </div>
            `);
          }
        });
      } else {
        $("#app-title").text("æœªçŸ¥åº”ç”¨");
        $("#module-container").html("<p style='text-align:center; padding:50px;'>å‚æ•°é”™è¯¯ï¼Œè¯·ä»èœå•é€‰æ‹©åº”ç”¨</p>");
      }
    });
  </script>
</body>
</html>
